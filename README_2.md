## 数据库结构

### 主要数据表

#### music 表
存储音乐文件信息
- `id`: 主键
- `title`: 歌曲标题
- `artist`: 艺术家
- `file_path`: 文件路径
- `cover_image`: 封面图片
- `share_reason`: 分享理由
- `share_code`: 分享码
- `created_at`: 创建时间
- `is_active`: 是否激活

#### comments 表
存储用户评论
- `id`: 主键
- `music_id`: 关联音乐ID
- `user_ip`: 用户IP
- `username`: 用户名
- `content`: 评论内容
- `created_at`: 创建时间

#### admin_users 表
存储管理员账户
- `id`: 主键
- `username`: 用户名
- `password`: 密码（加密）
- `created_at`: 创建时间

#### settings 表
存储系统设置
- `id`: 主键
- `setting_key`: 设置键
- `setting_value`: 设置值

## 安全特性

- SQL注入防护（预处理语句）
- XSS防护（输入过滤和输出转义）
- 文件上传类型验证
- IP-based评论限制
- 会话管理
- 管理员权限验证

## 配置选项

通过管理员后台可以配置：
- 每日评论限制（单IP）
- 网站标题
- 是否允许匿名评论

## 开发说明

### 添加新功能
1. 在相应目录创建PHP文件
2. 使用预处理语句操作数据库
3. 前端使用JavaScript进行交互
4. 遵循现有的代码风格和安全规范

### 自定义样式
修改 `static/css/` 目录下的CSS文件：
- `style.css`: 前台样式
- `admin.css`: 后台样式

### API扩展
新的API接口应放置在 `api/` 目录，返回JSON格式数据。

## 故障排除

### 常见问题

1. **文件上传失败**
   - 检查 `uploads/` 目录权限
   - 验证PHP上传文件大小限制
   - 检查文件类型是否被允许

2. **数据库连接错误**
   - 验证 `config.php` 中的数据库配置
   - 检查MySQL服务是否运行
   - 确认数据库用户权限

3. **页面显示异常**
   - 检查PHP错误日志
   - 验证所有依赖文件是否存在
   - 清除浏览器缓存

### 日志查看
查看Web服务器错误日志和PHP错误日志以获取详细信息。

## 许可证

本项目采用 MIT 许可证。

## 更新日志

### v1.0.0
- 初始版本发布
- 基础音乐分享功能
- 完整的管理后台
- 响应式设计

## 支持

如有问题或建议，请提交Issue或联系开发团队。